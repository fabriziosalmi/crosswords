<!DOCTYPE html>
<html>
<head>
    <title>Crossword Puzzle</title>
    <style>
        /* Add your CSS styles here */
        .crossword-grid {
            border-collapse: collapse;
        }
        .crossword-grid td {
            width: 30px;
            height: 30px;
            border: 1px solid black;
            text-align: center;
            font-family: sans-serif;
        }
        .black {
            background-color: black;
        }
        .white {
            background-color: white;
        }
        .letter {
          width: 100%;
          height: 100%;
          text-align: center;
          border: none;
          background-color: transparent;
          text-transform: uppercase;
          font-size: 20px; /* Adjust as needed */
          padding: 0; /* Remove default padding */
        }
        .number{
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 10px;
        }
        .cell-container{
            position: relative;
            width: 100%;
            height: 100%;
        }
        .definitions{
            margin-top: 20px;
        }
        .clue-number{
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Crossword Puzzle</h1>
    {grid_html}
    {definitions_html}

     <script>
    // Add JavaScript for interactivity here (handling input, checking answers, etc.)
    const inputs = document.querySelectorAll('.letter');

    inputs.forEach(input => {
        input.addEventListener('input', (event) => {
            const cell = event.target;
            let nextCell = null;

            if (cell.value.length >= cell.maxLength) {
                // Move to the next cell in the same direction
                const row = parseInt(cell.dataset.row);
                const col = parseInt(cell.dataset.col);
                const direction = cell.dataset.direction;

                if (direction === 'across') {
                    nextCell = document.querySelector(`.letter[data-row="${row}"][data-col="${col + 1}"][data-direction="${direction}"]`);
                } else { // down
                    nextCell = document.querySelector(`.letter[data-row="${row + 1}"][data-col="${col}"][data-direction="${direction}"]`);
                }
                 if (!nextCell) { //check if it is the last letter of the word
                    const currentId = cell.closest('.white').id
                    const [wordRow, wordCol, wordDir] = currentId.split("-")

                    if (direction == "across"){
                         nextCell = document.querySelector(`.letter[data-row="${parseInt(wordRow) + 1}"][data-col="${wordCol}"][data-direction="down"]`);
                    }else{
                        nextCell = document.querySelector(`.letter[data-row="${wordRow}"][data-col="${parseInt(wordCol) + 1}"][data-direction="across"]`);
                    }
                }
            }
            if (nextCell) {
                nextCell.focus();
            }
        });

         input.addEventListener('keydown', (event) => {
            const cell = event.target;
            let prevCell = null;
            const row = parseInt(cell.dataset.row);
            const col = parseInt(cell.dataset.col);
            const direction = cell.dataset.direction;

            if (event.key === 'Backspace' || event.key === 'Delete') {
                  if (cell.value.length === 0) { //Go back only if it's empty
                        if (direction === 'across') {
                            prevCell = document.querySelector(`.letter[data-row="${row}"][data-col="${col - 1}"][data-direction="${direction}"]`);
                        } else { // down
                            prevCell = document.querySelector(`.letter[data-row="${row - 1}"][data-col="${col}"][data-direction="${direction}"]`);
                        }
                         if (!prevCell) { //check if it is the first letter of the word
                                const currentId = cell.closest('.white').id
                                const [wordRow, wordCol, wordDir] = currentId.split("-")

                                if(direction == "across"){
                                     prevCell = document.querySelector(`.letter[data-row="${parseInt(wordRow) - 1}"][data-col="${wordCol}"][data-direction="down"]`);
                                }else{
                                    prevCell = document.querySelector(`.letter[data-row="${wordRow}"][data-col="${parseInt(wordCol) - 1}"][data-direction="across"]`);
                                }
                            }
                        if (prevCell) {
                            prevCell.focus();
                        }
                    }
            }
        });
    });

    </script>
</body>
</html>